<!DOCTYPE html>
<html>
  <head>
    <title>2Vmato widget</title>
    <link rel="icon" type="image/x-icon" href="images/favicon.ico">
    <link href="widget.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter+Tight:wght@700&display=swap" rel="stylesheet">
  </head>
  <body>
    <div id="timer">25:00</div>
    <div class="bottomdiv">
        <a id="start" title="start or resume your session" href="#">&ensp;start&ensp;</a>
        <a id="pause" title="pause the session" href="#">&ensp;pause&ensp;</a>
        <a title="reset the timer" href="">&ensp;restart&ensp;</a>
        <a title="widget version (Notion, embed, phone widgets...)" href="widget.html">&ensp;widget&ensp;</a>
        <a title="by 2VDev" href="https://github.com/2Vdev">&ensp;developer&ensp;</a>
    </div>
    
    <script>
      let workMinutes = 25;
      let breakMinutes = 5;
      let seconds = 0;
      let isPaused = false;
      let isWorking = true;
      let intervalId;
      let timer = document.getElementById("timer");
      
      function startTimer() {
        if (!isPaused) {
          seconds--;
          if (seconds < 0) {
            seconds = 59;
            if (isWorking) {
              workMinutes--;
            } else {
              breakMinutes--;
            }
          }
          if (isWorking) {
            if (workMinutes < 0) {
              workMinutes = 25;
              isWorking = false;
              timer.innerHTML = `${breakMinutes}:${seconds < 10 ? '0' : ''}${seconds}`;
            } else {
              timer.innerHTML = `${workMinutes}:${seconds < 10 ? '0' : ''}${seconds}`;
            }
          } else {
            if (breakMinutes < 0) {
              breakMinutes = 5;
              isWorking = true;
              timer.innerHTML = `${workMinutes}:${seconds < 10 ? '0' : ''}${seconds}`;
            } else {
              timer.innerHTML = `${breakMinutes}:${seconds < 10 ? '0' : ''}${seconds}`;
            }
          }
        }
      }
      
      document.getElementById("start").addEventListener("click", (event) => {
        event.preventDefault();
        if (!intervalId) {
          intervalId = setInterval(startTimer, 1000);
        } else {
          isPaused = false;
        }
      });
      
      document.getElementById("pause").addEventListener("click", (event) => {
        event.preventDefault();
        isPaused = true;
      });
    </script>
  </body>
</html>